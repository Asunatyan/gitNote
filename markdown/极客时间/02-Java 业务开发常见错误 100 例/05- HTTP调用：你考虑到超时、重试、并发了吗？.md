# 配置连接超时和读取超时参数的学问

- 连接超时参数 ConnectTimeout，让用户配置建连阶段的最长等待时间；

- 读取超时参数 ReadTimeout，用来控制从 Socket 上读取数据的最长等待时间。

第一个误区： 认为出现了读取超时，服务端的执行就会中断。
客户端读取超时 2 秒小于 服务端接口执行耗时 5 秒。服务还在执行,但是客户端已经超时了

第二个误区：认为读取超时只是 Socket 网络层面的概念，是数据传输的最长耗时，故将其配置得非常短，比如 100 毫秒。

读取时间=业务处理时间+写入socket时间

第三个误区：认为超时时间越长任务接口成功率就越高，将读取超时参数配置得太长。

如果超时时间很长，在等待服务端返回数据的同时，客户端线程（通常是 Tomcat 线程）也在等待，当下游服务出现大量超时的时候，程序可能也会受到拖累创建大量线程，最终崩溃(下游服务没有关闭,当来了一个请求,就会创建一个新的线程,所以时间太长,创建的线程也多)

。但面向用户响应的请求或是微服务短平快的同步接口调用，并发量一般较大，我们应该设置一个较短的读取超时时间，以防止被下游服务拖慢，通常不会设置超过 30 秒的读取超时。